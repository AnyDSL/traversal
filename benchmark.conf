# Configuration file for the traversal benchmark

# Tools
ref_intr = 'build/src/frontend' # Reference intersection program
bvh_io = '../benchsiggraphasia15/build/bvh_extractor/bvhExtractor' # BVH file generator
gen_prim = 'build/src/gen_primary'   # Primary rays generator
gen_shadow = 'build/src/gen_shadow'  # Shadow rays generator
gen_random = 'build/src/gen_random'  # Random rays generator
fbuf2png = 'build/src/fbuf2png'     # FBUF to PNG converter

# Generator tools options
num_cores = 2           # Number of cores used when generating BVH and ray files

# Directories
obj_dir  = 'benchmarks/models'     # OBJ models directory
bvh_dir  = 'benchmarks/bvhs'     # BVH file directory
rays_dir = 'benchmarks/distribs'   # Ray distribution directory
res_dir  = 'benchmarks/results'    # Benchmark results directory

# Benchmark programs
benches = ['benchmarks/programs/traversal_cpu', 'benchmarks/programs/embree_icc', 'benchmarks/programs/embree_clang', 'benchmarks/programs/traversal_gpu', 'benchmarks/programs/aila']

# Benchmark parameters
runs = 80              # Number of iterations
dryruns = 20             # Number of warmup iterations

tmin_shadow = 0.01
tmax_shadow = 1.0
tmin_primary = 0.0
tmax_primary = 100.0
tmax_primary_sponza = 1.0e4  # Sponza is borked, need a greater tmax
tmax_primary_powerplant = 2.5e5  # Sponza is borked, need a greater tmax
tmax_primary_conf = 1.0e4    # Conference is also borked, same here
tmin_random = 0.0
tmax_random = 1.0
image_width = 1024
image_height = 1024
global_fov = 60.0

# Dataset
rays = {
#SIBENIK
    "sibenik.rays": {
        "generate": "primary",
        "eye": (14.9961, -9.35904, 0.361284),
        "center": (0.272119, -11.0443, 0.114674),
        "up": (0.0, 1.0, 0.0),
        "fov": global_fov,
        "width": image_width,
        "height": image_height,
        "tmin": tmin_primary,
        "tmax": tmax_primary
    },
  
    "sibenik-shadow.rays": {
        "generate": "shadow",
        "light": (2.15402, -4.52931, 2.0062),
        "primary": "sibenik.rays",
        "scene": "sibenik.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_shadow,
        "tmax": tmax_shadow
    },
    "sibenik-random.rays": {
        "generate": "random",
        "scene": "sibenik.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_random,
        "tmax": tmax_random
    },
# Conference
    "conference.rays": {
        "generate": "primary",
        "eye": (1424.66, 303.848, -498.319),
        "center": (1411.32, 301.019, -492.511),
        "up": (-0.17888, 0.981575, 0.0671665),
        "fov": global_fov,
        "width": image_width,
        "height": image_height,
        "tmin": tmin_primary,
        "tmax": tmax_primary_conf
    },
   
    "conference-shadow.rays": {
        "generate": "shadow",
        "light": (0, 400.712, 0),
        "primary": "conference.rays",
        "scene": "conference.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_shadow,
        "tmax": tmax_shadow
    },
    "conference-random.rays": {
        "generate": "random",
        "scene": "conference.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_random,
        "tmax": tmax_random
    },

#Sponza
   "sponza.rays": {
        "generate": "primary",
        "eye": (877.909, 318.274, 34.6546),
        "center": (863.187, 316.6, 34.2517),
        "up": (0.0, 1.0, 0.0),
        "fov": global_fov,
        "width": image_width,
        "height": image_height,
        "tmin": tmin_primary,
        "tmax": tmax_primary_sponza
    },
  
    "sponza-shadow.rays": {
        "generate": "shadow",
        "light": (-45.8693, 916.24, -54.8576),
        "primary": "sponza.rays",
        "scene": "sponza.bvh", 
        "width": image_width,
        "height": image_height,
        "tmin": tmin_shadow,
        "tmax": tmax_shadow
    },
 
    "sponza-random.rays": {
        "generate": "random",
        "scene": "sponza.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_random,
        "tmax": tmax_random
    },
#San Miguel
 
    "sanmiguel.rays": {
        "generate": "primary",
        "eye": (6.58589, 9.46392, 7.78309),
        "center": (18.1363, 3.60199, 0.576542),
        "up": (0.387071, 0.913818, -0.122931),
        "fov": global_fov,
        "width": image_width,
        "height": image_height,
        "tmin": tmin_primary,
        "tmax": tmax_primary
    },
 
    "sanmiguel-shadow.rays": {
        "generate": "shadow",
        "light": (-6.56, 15.87, 16.50),
        "primary": "sanmiguel.rays",
        "scene": "sanmiguel.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_shadow,
        "tmax": tmax_shadow
    },
    "sanmiguel-random.rays": {
        "generate": "random",
        "scene": "sanmiguel.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_random,
        "tmax": tmax_random
    },

#Powerplant
    "powerplant.rays": {
        "generate": "primary",
        "eye": (-103901.0, 46426.7, 100609.0),
        "center": (-103888.0, 46424.2, 100602.0),
        "up": (0.0, 1.0, 0.0),
        "fov": global_fov,
        "width": image_width,
        "height": image_height,
        "tmin": tmin_primary,
        "tmax": tmax_primary_powerplant 
    },
 
    "powerplant-shadow.rays": {
        "generate": "shadow",
        "light": (-68660.6, 155884.0, 7280.56),    
        "primary": "powerplant.rays",
        "scene": "powerplant.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_shadow,
        "tmax": tmax_shadow
    },
    "powerplant-random.rays": {
        "generate": "random",
        "scene": "powerplant.bvh",
        "width": image_width,
        "height": image_height,
        "tmin": tmin_random,
        "tmax": tmax_random
    },
}
scenes = {
    "sibenik.bvh": ["sibenik.rays", "sibenik-shadow.rays", "sibenik-random.rays"],
    "conference.bvh": ["conference.rays", "conference-shadow.rays", "conference-random.rays"],
    "sponza.bvh": ["sponza.rays", "sponza-shadow.rays",  "sponza-random.rays"],
    "sanmiguel.bvh": ["sanmiguel.rays", "sanmiguel-shadow.rays",  "sanmiguel-random.rays"],
    "powerplant.bvh": ["powerplant.rays", "powerplant-shadow.rays",  "powerplant-random.rays"],
}             # Dictionary of BVH files associated with their distributions


mappings = {
    "traversal_cpu": ["embree_icc", "embree_clang"],
    "traversal_gpu": ["aila"]
}
